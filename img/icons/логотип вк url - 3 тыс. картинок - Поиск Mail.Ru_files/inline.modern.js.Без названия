!function(){"use strict";var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function e(t){var e={exports:{}};return t(e,e.exports),e.exports}var n=function(t){return t&&t.Math==Math&&t},r=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof t&&t)||function(){return this}()||Function("return this")(),o=function(t){try{return!!t()}catch(t){return!0}},i=!o((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),s={}.propertyIsEnumerable,a=Object.getOwnPropertyDescriptor,c={f:a&&!s.call({1:2},1)?function(t){var e=a(this,t);return!!e&&e.enumerable}:s},u=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},l={}.toString,f=function(t){return l.call(t).slice(8,-1)},h="".split,d=o((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==f(t)?h.call(t,""):Object(t)}:Object,p=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t},v=function(t){return d(p(t))},g=function(t){return"object"==typeof t?null!==t:"function"==typeof t},m=function(t,e){if(!g(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!g(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!g(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!g(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")},y={}.hasOwnProperty,_=function(t,e){return y.call(t,e)},b=r.document,w=g(b)&&g(b.createElement),C=function(t){return w?b.createElement(t):{}},S=!i&&!o((function(){return 7!=Object.defineProperty(C("div"),"a",{get:function(){return 7}}).a})),A=Object.getOwnPropertyDescriptor,x={f:i?A:function(t,e){if(t=v(t),e=m(e,!0),S)try{return A(t,e)}catch(t){}if(_(t,e))return u(!c.f.call(t,e),t[e])}},O=function(t){if(!g(t))throw TypeError(String(t)+" is not an object");return t},E=Object.defineProperty,k={f:i?E:function(t,e,n){if(O(t),e=m(e,!0),O(n),S)try{return E(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},I=i?function(t,e,n){return k.f(t,e,u(1,n))}:function(t,e,n){return t[e]=n,t},T=function(t,e){try{I(r,t,e)}catch(n){r[t]=e}return e},j="__core-js_shared__",R=r[j]||T(j,{}),P=Function.toString;"function"!=typeof R.inspectSource&&(R.inspectSource=function(t){return P.call(t)});var U,L,M,D=R.inspectSource,N=r.WeakMap,F="function"==typeof N&&/native code/.test(D(N)),$=e((function(t){(t.exports=function(t,e){return R[t]||(R[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.10.0",mode:"global",copyright:"Â© 2021 Denis Pushkarev (zloirock.ru)"})})),G=0,K=Math.random(),V=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++G+K).toString(36)},B=$("keys"),H=function(t){return B[t]||(B[t]=V(t))},z={},Q=r.WeakMap;if(F){var q=R.state||(R.state=new Q),J=q.get,W=q.has,X=q.set;U=function(t,e){return e.facade=t,X.call(q,t,e),e},L=function(t){return J.call(q,t)||{}},M=function(t){return W.call(q,t)}}else{var Y=H("state");z[Y]=!0,U=function(t,e){return e.facade=t,I(t,Y,e),e},L=function(t){return _(t,Y)?t[Y]:{}},M=function(t){return _(t,Y)}}var Z,tt,et={set:U,get:L,has:M,enforce:function(t){return M(t)?L(t):U(t,{})},getterFor:function(t){return function(e){var n;if(!g(e)||(n=L(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}},nt=e((function(t){var e=et.get,n=et.enforce,o=String(String).split("String");(t.exports=function(t,e,i,s){var a,c=!!s&&!!s.unsafe,u=!!s&&!!s.enumerable,l=!!s&&!!s.noTargetGet;"function"==typeof i&&("string"!=typeof e||_(i,"name")||I(i,"name",e),(a=n(i)).source||(a.source=o.join("string"==typeof e?e:""))),t!==r?(c?!l&&t[e]&&(u=!0):delete t[e],u?t[e]=i:I(t,e,i)):u?t[e]=i:T(e,i)})(Function.prototype,"toString",(function(){return"function"==typeof this&&e(this).source||D(this)}))})),rt=r,ot=function(t){return"function"==typeof t?t:void 0},it=function(t,e){return arguments.length<2?ot(rt[t])||ot(r[t]):rt[t]&&rt[t][e]||r[t]&&r[t][e]},st=Math.ceil,at=Math.floor,ct=function(t){return isNaN(t=+t)?0:(t>0?at:st)(t)},ut=Math.min,lt=function(t){return t>0?ut(ct(t),9007199254740991):0},ft=Math.max,ht=Math.min,dt=function(t){return function(e,n,r){var o,i=v(e),s=lt(i.length),a=function(t,e){var n=ct(t);return n<0?ft(n+e,0):ht(n,e)}(r,s);if(t&&n!=n){for(;s>a;)if((o=i[a++])!=o)return!0}else for(;s>a;a++)if((t||a in i)&&i[a]===n)return t||a||0;return!t&&-1}},pt={includes:dt(!0),indexOf:dt(!1)}.indexOf,vt=function(t,e){var n,r=v(t),o=0,i=[];for(n in r)!_(z,n)&&_(r,n)&&i.push(n);for(;e.length>o;)_(r,n=e[o++])&&(~pt(i,n)||i.push(n));return i},gt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],mt=gt.concat("length","prototype"),yt={f:Object.getOwnPropertyNames||function(t){return vt(t,mt)}},_t={f:Object.getOwnPropertySymbols},bt=it("Reflect","ownKeys")||function(t){var e=yt.f(O(t)),n=_t.f;return n?e.concat(n(t)):e},wt=function(t,e){for(var n=bt(e),r=k.f,o=x.f,i=0;i<n.length;i++){var s=n[i];_(t,s)||r(t,s,o(e,s))}},Ct=/#|\.prototype\./,St=function(t,e){var n=xt[At(t)];return n==Et||n!=Ot&&("function"==typeof e?o(e):!!e)},At=St.normalize=function(t){return String(t).replace(Ct,".").toLowerCase()},xt=St.data={},Ot=St.NATIVE="N",Et=St.POLYFILL="P",kt=St,It=x.f,Tt=function(t,e){var n,o,i,s,a,c=t.target,u=t.global,l=t.stat;if(n=u?r:l?r[c]||T(c,{}):(r[c]||{}).prototype)for(o in e){if(s=e[o],i=t.noTargetGet?(a=It(n,o))&&a.value:n[o],!kt(u?o:c+(l?".":"#")+o,t.forced)&&void 0!==i){if(typeof s==typeof i)continue;wt(s,i)}(t.sham||i&&i.sham)&&I(s,"sham",!0),nt(n,o,s,t)}},jt=r.Promise,Rt=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t},Pt="process"==f(r.process),Ut=it("navigator","userAgent")||"",Lt=r.process,Mt=Lt&&Lt.versions,Dt=Mt&&Mt.v8;Dt?tt=(Z=Dt.split("."))[0]+Z[1]:Ut&&(!(Z=Ut.match(/Edge\/(\d+)/))||Z[1]>=74)&&(Z=Ut.match(/Chrome\/(\d+)/))&&(tt=Z[1]);var Nt=tt&&+tt,Ft=!!Object.getOwnPropertySymbols&&!o((function(){return!Symbol.sham&&(Pt?38===Nt:Nt>37&&Nt<41)})),$t=Ft&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Gt=$("wks"),Kt=r.Symbol,Vt=$t?Kt:Kt&&Kt.withoutSetter||V,Bt=function(t){return _(Gt,t)&&(Ft||"string"==typeof Gt[t])||(Ft&&_(Kt,t)?Gt[t]=Kt[t]:Gt[t]=Vt("Symbol."+t)),Gt[t]},Ht=Bt("species"),zt=function(t,e){var n,r=O(t).constructor;return void 0===r||null==(n=O(r)[Ht])?e:Rt(n)},Qt=function(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r})),this.resolve=Rt(e),this.reject=Rt(n)},qt={f:function(t){return new Qt(t)}},Jt=function(t,e){if(O(t),g(e)&&e.constructor===t)return e;var n=qt.f(t);return(0,n.resolve)(e),n.promise},Wt=!!jt&&o((function(){jt.prototype.finally.call({then:function(){}},(function(){}))}));Tt({target:"Promise",proto:!0,real:!0,forced:Wt},{finally:function(t){var e=zt(this,it("Promise")),n="function"==typeof t;return this.then(n?function(n){return Jt(e,t()).then((function(){return n}))}:t,n?function(n){return Jt(e,t()).then((function(){throw n}))}:t)}}),"function"!=typeof jt||jt.prototype.finally||nt(jt.prototype,"finally",it("Promise").prototype.finally);var Xt=k.f,Yt=Bt("toStringTag"),Zt=function(t,e,n){t&&!_(t=n?t:t.prototype,Yt)&&Xt(t,Yt,{configurable:!0,value:e})},te=Bt("species"),ee=function(t){var e=it(t),n=k.f;i&&e&&!e[te]&&n(e,te,{configurable:!0,get:function(){return this}})},ne={},re=Bt("iterator"),oe=Array.prototype,ie=function(t,e,n){if(Rt(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,o){return t.call(e,n,r,o)}}return function(){return t.apply(e,arguments)}},se={};se[Bt("toStringTag")]="z";var ae="[object z]"===String(se),ce=Bt("toStringTag"),ue="Arguments"==f(function(){return arguments}()),le=ae?f:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),ce))?n:ue?f(e):"Object"==(r=f(e))&&"function"==typeof e.callee?"Arguments":r},fe=Bt("iterator"),he=function(t){var e=t.return;if(void 0!==e)return O(e.call(t)).value},de=function(t,e){this.stopped=t,this.result=e},pe=function(t,e,n){var r,o,i,s,a,c,u,l,f=n&&n.that,h=!(!n||!n.AS_ENTRIES),d=!(!n||!n.IS_ITERATOR),p=!(!n||!n.INTERRUPTED),v=ie(e,f,1+h+p),g=function(t){return r&&he(r),new de(!0,t)},m=function(t){return h?(O(t),p?v(t[0],t[1],g):v(t[0],t[1])):p?v(t,g):v(t)};if(d)r=t;else{if(o=function(t){if(null!=t)return t[fe]||t["@@iterator"]||ne[le(t)]}(t),"function"!=typeof o)throw TypeError("Target is not iterable");if(void 0!==(l=o)&&(ne.Array===l||oe[re]===l)){for(i=0,s=lt(t.length);s>i;i++)if((a=m(t[i]))&&a instanceof de)return a;return new de(!1)}r=o.call(t)}for(c=r.next;!(u=c.call(r)).done;){try{a=m(u.value)}catch(t){throw he(r),t}if("object"==typeof a&&a&&a instanceof de)return a}return new de(!1)},ve=Bt("iterator"),ge=!1;try{var me=0,ye={next:function(){return{done:!!me++}},return:function(){ge=!0}};ye[ve]=function(){return this},Array.from(ye,(function(){throw 2}))}catch(t){}var _e,be,we,Ce=it("document","documentElement"),Se=/(iphone|ipod|ipad).*applewebkit/i.test(Ut),Ae=r.location,xe=r.setImmediate,Oe=r.clearImmediate,Ee=r.process,ke=r.MessageChannel,Ie=r.Dispatch,Te=0,je={},Re="onreadystatechange",Pe=function(t){if(je.hasOwnProperty(t)){var e=je[t];delete je[t],e()}},Ue=function(t){return function(){Pe(t)}},Le=function(t){Pe(t.data)},Me=function(t){r.postMessage(t+"",Ae.protocol+"//"+Ae.host)};xe&&Oe||(xe=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return je[++Te]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},_e(Te),Te},Oe=function(t){delete je[t]},Pt?_e=function(t){Ee.nextTick(Ue(t))}:Ie&&Ie.now?_e=function(t){Ie.now(Ue(t))}:ke&&!Se?(we=(be=new ke).port2,be.port1.onmessage=Le,_e=ie(we.postMessage,we,1)):r.addEventListener&&"function"==typeof postMessage&&!r.importScripts&&Ae&&"file:"!==Ae.protocol&&!o(Me)?(_e=Me,r.addEventListener("message",Le,!1)):_e=Re in C("script")?function(t){Ce.appendChild(C("script")).onreadystatechange=function(){Ce.removeChild(this),Pe(t)}}:function(t){setTimeout(Ue(t),0)});var De,Ne,Fe,$e,Ge,Ke,Ve,Be,He={set:xe,clear:Oe},ze=/web0s(?!.*chrome)/i.test(Ut),Qe=x.f,qe=He.set,Je=r.MutationObserver||r.WebKitMutationObserver,We=r.document,Xe=r.process,Ye=r.Promise,Ze=Qe(r,"queueMicrotask"),tn=Ze&&Ze.value;tn||(De=function(){var t,e;for(Pt&&(t=Xe.domain)&&t.exit();Ne;){e=Ne.fn,Ne=Ne.next;try{e()}catch(t){throw Ne?$e():Fe=void 0,t}}Fe=void 0,t&&t.enter()},Se||Pt||ze||!Je||!We?Ye&&Ye.resolve?(Ve=Ye.resolve(void 0),Be=Ve.then,$e=function(){Be.call(Ve,De)}):$e=Pt?function(){Xe.nextTick(De)}:function(){qe.call(r,De)}:(Ge=!0,Ke=We.createTextNode(""),new Je(De).observe(Ke,{characterData:!0}),$e=function(){Ke.data=Ge=!Ge}));var en,nn,rn,on,sn,an=tn||function(t){var e={fn:t,next:void 0};Fe&&(Fe.next=e),Ne||(Ne=e,$e()),Fe=e},cn=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}},un=He.set,ln=Bt("species"),fn="Promise",hn=et.get,dn=et.set,pn=et.getterFor(fn),vn=jt,gn=r.TypeError,mn=r.document,yn=r.process,_n=it("fetch"),bn=qt.f,wn=bn,Cn=!!(mn&&mn.createEvent&&r.dispatchEvent),Sn="function"==typeof PromiseRejectionEvent,An="unhandledrejection",xn=kt(fn,(function(){if(!(D(vn)!==String(vn))){if(66===Nt)return!0;if(!Pt&&!Sn)return!0}if(Nt>=51&&/native code/.test(vn))return!1;var t=vn.resolve(1),e=function(t){t((function(){}),(function(){}))};return(t.constructor={})[ln]=e,!(t.then((function(){}))instanceof e)})),On=xn||!function(t,e){if(!e&&!ge)return!1;var n=!1;try{var r={};r[ve]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(t){}return n}((function(t){vn.all(t).catch((function(){}))})),En=function(t){var e;return!(!g(t)||"function"!=typeof(e=t.then))&&e},kn=function(t,e){if(!t.notified){t.notified=!0;var n=t.reactions;an((function(){for(var r=t.value,o=1==t.state,i=0;n.length>i;){var s,a,c,u=n[i++],l=o?u.ok:u.fail,f=u.resolve,h=u.reject,d=u.domain;try{l?(o||(2===t.rejection&&Rn(t),t.rejection=1),!0===l?s=r:(d&&d.enter(),s=l(r),d&&(d.exit(),c=!0)),s===u.promise?h(gn("Promise-chain cycle")):(a=En(s))?a.call(s,f,h):f(s)):h(r)}catch(t){d&&!c&&d.exit(),h(t)}}t.reactions=[],t.notified=!1,e&&!t.rejection&&Tn(t)}))}},In=function(t,e,n){var o,i;Cn?((o=mn.createEvent("Event")).promise=e,o.reason=n,o.initEvent(t,!1,!0),r.dispatchEvent(o)):o={promise:e,reason:n},!Sn&&(i=r["on"+t])?i(o):t===An&&function(t,e){var n=r.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))}("Unhandled promise rejection",n)},Tn=function(t){un.call(r,(function(){var e,n=t.facade,r=t.value;if(jn(t)&&(e=cn((function(){Pt?yn.emit("unhandledRejection",r,n):In(An,n,r)})),t.rejection=Pt||jn(t)?2:1,e.error))throw e.value}))},jn=function(t){return 1!==t.rejection&&!t.parent},Rn=function(t){un.call(r,(function(){var e=t.facade;Pt?yn.emit("rejectionHandled",e):In("rejectionhandled",e,t.value)}))},Pn=function(t,e,n){return function(r){t(e,r,n)}},Un=function(t,e,n){t.done||(t.done=!0,n&&(t=n),t.value=e,t.state=2,kn(t,!0))},Ln=function(t,e,n){if(!t.done){t.done=!0,n&&(t=n);try{if(t.facade===e)throw gn("Promise can't be resolved itself");var r=En(e);r?an((function(){var n={done:!1};try{r.call(e,Pn(Ln,n,t),Pn(Un,n,t))}catch(e){Un(n,e,t)}})):(t.value=e,t.state=1,kn(t,!1))}catch(e){Un({done:!1},e,t)}}};xn&&(vn=function(t){!function(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation")}(this,vn,fn),Rt(t),en.call(this);var e=hn(this);try{t(Pn(Ln,e),Pn(Un,e))}catch(t){Un(e,t)}},(en=function(t){dn(this,{type:fn,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=function(t,e,n){for(var r in e)nt(t,r,e[r],n);return t}(vn.prototype,{then:function(t,e){var n=pn(this),r=bn(zt(this,vn));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=Pt?yn.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&kn(n,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),nn=function(){var t=new en,e=hn(t);this.promise=t,this.resolve=Pn(Ln,e),this.reject=Pn(Un,e)},qt.f=bn=function(t){return t===vn||t===rn?new nn(t):wn(t)},"function"==typeof jt&&(on=jt.prototype.then,nt(jt.prototype,"then",(function(t,e){var n=this;return new vn((function(t,e){on.call(n,t,e)})).then(t,e)}),{unsafe:!0}),"function"==typeof _n&&Tt({global:!0,enumerable:!0,forced:!0},{fetch:function(t){return Jt(vn,_n.apply(r,arguments))}}))),Tt({global:!0,wrap:!0,forced:xn},{Promise:vn}),Zt(vn,fn,!1),ee(fn),rn=it(fn),Tt({target:fn,stat:!0,forced:xn},{reject:function(t){var e=bn(this);return e.reject.call(void 0,t),e.promise}}),Tt({target:fn,stat:!0,forced:xn},{resolve:function(t){return Jt(this,t)}}),Tt({target:fn,stat:!0,forced:On},{all:function(t){var e=this,n=bn(e),r=n.resolve,o=n.reject,i=cn((function(){var n=Rt(e.resolve),i=[],s=0,a=1;pe(t,(function(t){var c=s++,u=!1;i.push(void 0),a++,n.call(e,t).then((function(t){u||(u=!0,i[c]=t,--a||r(i))}),o)})),--a||r(i)}));return i.error&&o(i.value),n.promise},race:function(t){var e=this,n=bn(e),r=n.reject,o=cn((function(){var o=Rt(e.resolve);pe(t,(function(t){o.call(e,t).then(n.resolve,r)}))}));return o.error&&r(o.value),n.promise}}),"function"!=typeof Promise.prototype.finally&&(Promise.prototype.finally=function(t){return this.then((e=>this.constructor.resolve(t()).then((()=>e)))).catch((e=>this.constructor.resolve(t()).then((()=>{throw e}))))}),window.__knownBlocker=!!function(){try{const t=["OPR","n !im","sByTa","1003447LuLqWg","dow","sibil","ing","Opera","style","565qdizXE","getEl","232331sDoJoU","18LCDgxI","cssTe","8949RXqNfR","s: 43","play:","porta","nt; o","tInto","Conte","mport","1gfBELn","ock","getOw","textC","toStr","ntWin","ement","sheet","ortan","injec","lengt","hidde","ant; ","nProp","ptor","dbl","type","89029nRIyjx","ertyD","index","get","1153xndIzo","349hFSaxZ","3toLzmo"," none","gName","conte","proto","1DNflRb","1153390UmUDUA","8264wGiSvY"];function e(e,n){return t[e-=493]}return function(t,n){const r=e;for(;;)try{if(700794===-parseInt(r(504))*parseInt(r(505))+parseInt(r(497))*-parseInt(r(516))+parseInt(r(510))*-parseInt(r(529))+parseInt(r(518))*parseInt(r(499))+parseInt(r(521))*-parseInt(r(519))+parseInt(r(493))+parseInt(r(506))*parseInt(r(498)))break;t.push(t.shift())}catch(e){t.push(t.shift())}}(t),function(){const t=e,n="a"+t(544)+t(530),r=Object[t(531)+t(542)+t(494)+"escri"+t(543)](HTMLIFrameElement[t(503)+t(545)],t(502)+t(534)+"dow");if(r&&r[t(496)]){if(-1!==r[t(496)][t(533)+t(513)]()[t(495)+"Of"](t(538)+t(526)+t(527)+t(534)+t(511)))return n}const o=navigator.userAgent;if(-1!==o[t(495)+"Of"](t(514))||-1!==o[t(495)+"Of"](t(507))){const e=document[t(517)+t(535)+t(509)+t(501)]("head")[0];if(e){const r=e[t(517)+"ement"+t(509)+t(501)](t(515));for(let e=0,o=r[t(539)+"h"];e<o;e++)try{const o=r[e];if(o&&!o[t(532)+"ontent"]&&o[t(536)]){const e=o.sheet.rules;if(e)for(let r=0,o=e.length;r<o;r++)try{if(-1!==e[r][t(520)+"xt"].indexOf("{ dis"+t(523)+t(500)+" !imp"+t(537)+"t; vi"+t(512)+"ity: "+t(540)+t(508)+t(524)+t(525)+"rphan"+t(522)+"21 !i"+t(528)+t(541)+"}"))return n}catch(t){}}}catch(t){}}}}()}catch(t){}}(),function(t){t.Default="default",t.Grey="grey",t.Dark="dark"}(sn||(sn={}));const Mn="ru_RU";var Dn,Nn=Object.keys||function(t){return vt(t,gt)},Fn=i?Object.defineProperties:function(t,e){O(t);for(var n,r=Nn(e),o=r.length,i=0;o>i;)k.f(t,n=r[i++],e[n]);return t},$n=H("IE_PROTO"),Gn=function(){},Kn=function(t){return"<script>"+t+"</"+"script>"},Vn=function(){try{Dn=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t,e;Vn=Dn?function(t){t.write(Kn("")),t.close();var e=t.parentWindow.Object;return t=null,e}(Dn):((e=C("iframe")).style.display="none",Ce.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(Kn("document.F=Object")),t.close(),t.F);for(var n=gt.length;n--;)delete Vn.prototype[gt[n]];return Vn()};z[$n]=!0;var Bn=Object.create||function(t,e){var n;return null!==t?(Gn.prototype=O(t),n=new Gn,Gn.prototype=null,n[$n]=t):n=Vn(),void 0===e?n:Fn(n,e)},Hn=Bt("unscopables"),zn=Array.prototype;null==zn[Hn]&&k.f(zn,Hn,{configurable:!0,value:Bn(null)});var Qn,qn,Jn,Wn=function(t){zn[Hn][t]=!0},Xn=function(t){return Object(p(t))},Yn=!o((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),Zn=H("IE_PROTO"),tr=Object.prototype,er=Yn?Object.getPrototypeOf:function(t){return t=Xn(t),_(t,Zn)?t[Zn]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?tr:null},nr=Bt("iterator"),rr=!1;[].keys&&("next"in(Jn=[].keys())?(qn=er(er(Jn)))!==Object.prototype&&(Qn=qn):rr=!0);var or=null==Qn||o((function(){var t={};return Qn[nr].call(t)!==t}));or&&(Qn={}),_(Qn,nr)||I(Qn,nr,(function(){return this}));var ir={IteratorPrototype:Qn,BUGGY_SAFARI_ITERATORS:rr},sr=ir.IteratorPrototype,ar=function(){return this},cr=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),e=n instanceof Array}catch(t){}return function(n,r){return O(n),function(t){if(!g(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype")}(r),e?t.call(n,r):n.__proto__=r,n}}():void 0),ur=ir.IteratorPrototype,lr=ir.BUGGY_SAFARI_ITERATORS,fr=Bt("iterator"),hr="keys",dr="values",pr="entries",vr=function(){return this},gr="Array Iterator",mr=et.set,yr=et.getterFor(gr),_r=function(t,e,n,r,o,i,s){!function(t,e,n){var r=e+" Iterator";t.prototype=Bn(sr,{next:u(1,n)}),Zt(t,r,!1),ne[r]=ar}(n,e,r);var a,c,l,f=function(t){if(t===o&&g)return g;if(!lr&&t in p)return p[t];switch(t){case hr:case dr:case pr:return function(){return new n(this,t)}}return function(){return new n(this)}},h=e+" Iterator",d=!1,p=t.prototype,v=p[fr]||p["@@iterator"]||o&&p[o],g=!lr&&v||f(o),m="Array"==e&&p.entries||v;if(m&&(a=er(m.call(new t)),ur!==Object.prototype&&a.next&&(er(a)!==ur&&(cr?cr(a,ur):"function"!=typeof a[fr]&&I(a,fr,vr)),Zt(a,h,!0))),o==dr&&v&&v.name!==dr&&(d=!0,g=function(){return v.call(this)}),p[fr]!==g&&I(p,fr,g),ne[e]=g,o)if(c={values:f(dr),keys:i?g:f(hr),entries:f(pr)},s)for(l in c)(lr||d||!(l in p))&&nt(p,l,c[l]);else Tt({target:e,proto:!0,forced:lr||d},c);return c}(Array,"Array",(function(t,e){mr(this,{type:gr,target:v(t),index:0,kind:e})}),(function(){var t=yr(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}}),"values");ne.Arguments=ne.Array,Wn("keys"),Wn("values"),Wn("entries");var br={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},wr=Bt("iterator"),Cr=Bt("toStringTag"),Sr=_r.values;for(var Ar in br){var xr=r[Ar],Or=xr&&xr.prototype;if(Or){if(Or[wr]!==Sr)try{I(Or,wr,Sr)}catch(t){Or[wr]=Sr}if(Or[Cr]||I(Or,Cr,Ar),br[Ar])for(var Er in _r)if(Or[Er]!==_r[Er])try{I(Or,Er,_r[Er])}catch(t){Or[Er]=_r[Er]}}}const kr=()=>{};class Ir{constructor(){this._events=new Map,this._oneTimeEvents=new Map}getListenersNumber(t){return[...this._events.get(t)||[],...this._oneTimeEvents.get(t)||[]].length}on(t,e){const n=[...this._events.get(t)||[],e];return this._events.set(t,n),this}removeListener(t,e){const n=(this._events.get(t)||[]).filter((t=>t!==e));return this._events.set(t,n),this}once(t,e){const n=[...this._oneTimeEvents.get(t)||[],e];return this._oneTimeEvents.set(t,n),this}emit(t,e,n){const r=e||kr;(this._events.get(t)||[]).forEach((t=>t({data:n},r)));return(this._oneTimeEvents.get(t)||[]).forEach((t=>t({data:n},r))),this._oneTimeEvents.delete(t),this}static relay(t,e,n){t.forEach((t=>{e.on(t,(()=>{n.emit(t)}))}))}}class Tr extends Ir{constructor(){super(),this._eventsData=new Map}on(t,e){return super.on(t,e),this.executeListenerIfHasData(t,e),this}removeListener(t,e){return super.removeListener(t,e),this.getListenersNumber(t)||this._eventsData.delete(t),this}emit(t,e,n){return super.emit(t,e,n),this._eventsData.set(t,n),this}executeListenerIfHasData(t,e){const n=this._eventsData.get(t);n&&e({data:n},kr)}}const jr=/\.devmail\.ru$/.test(window.location.host),Rr=".devmail.ru",Pr=jr?Rr:".mail.ru";var Ur;!function(t){t.BUILD="2.72.2",t.MODERN_BROWSERS_REGEXP=/(Edge\/(79(?:\.0)?|79(?:\.([1-9]|\d{2,}))?|([8-9]\d|\d{3,})(?:\.\d+)?|83(?:\.0)?|83(?:\.([1-9]|\d{2,}))?|(8[4-9]|9\d|\d{3,})(?:\.\d+)?))|((Chromium|Chrome)\/(61\.0|61\.([1-9]|\d{2,})|(6[2-9]|[7-9]\d|\d{3,})\.\d+|83\.0|83\.([1-9]|\d{2,})|(8[4-9]|9\d|\d{3,})\.\d+)(?:\.\d+)?)|(Version\/(13\.0|13\.([1-9]|\d{2,})|(1[4-9]|[2-9]\d|\d{3,})\.\d+|14\.0|14\.([1-9]|\d{2,})|(1[5-9]|[2-9]\d|\d{3,})\.\d+|15\.0|15\.([1-9]|\d{2,})|(1[6-9]|[2-9]\d|\d{3,})\.\d+)(?:\.\d+)? Safari\/)|(Firefox\/(60\.0|60\.([1-9]|\d{2,})|(6[1-9]|[7-9]\d|\d{3,})\.\d+)\.\d+)|(Firefox\/(60\.0|60\.([1-9]|\d{2,})|(6[1-9]|[7-9]\d|\d{3,})\.\d+)(pre|[ab]\d+[a-z]*)?)/}(Ur||(Ur={}));var Lr=function(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=document.createElement("script"),r=document.querySelector("head");function o(){r.appendChild(n)}return e&&(n.defer=!0,n.async=!0),n.src=t,"opera"in window&&"complete"!==document.readyState?window.addEventListener("DOMContentLoaded",o):o(),n},Mr=k.f,Dr=r.Symbol;if(i&&"function"==typeof Dr&&(!("description"in Dr.prototype)||void 0!==Dr().description)){var Nr={},Fr=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof Fr?new Dr(t):void 0===t?Dr():Dr(t);return""===t&&(Nr[e]=!0),e};wt(Fr,Dr);var $r=Fr.prototype=Dr.prototype;$r.constructor=Fr;var Gr=$r.toString,Kr="Symbol(test)"==String(Dr("test")),Vr=/^Symbol\((.*)\)[^)]+$/;Mr($r,"description",{configurable:!0,get:function(){var t=g(this)?this.valueOf():this,e=Gr.call(t);if(_(Nr,t))return"";var n=Kr?e.slice(7,-1):e.replace(Vr,"$1");return""===n?void 0:n}}),Tt({global:!0,forced:!0},{Symbol:Fr})}var Br=function(t,e){var n=[][t];return!!n&&o((function(){n.call(null,e||function(){throw 1},1)}))},Hr=[],zr=Hr.sort,Qr=o((function(){Hr.sort(void 0)})),qr=o((function(){Hr.sort(null)})),Jr=Br("sort");Tt({target:"Array",proto:!0,forced:Qr||!qr||!Jr},{sort:function(t){return void 0===t?zr.call(Xn(this)):zr.call(Xn(this),Rt(t))}});var Wr=function(){var t=O(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e};function Xr(t,e){return RegExp(t,e)}var Yr={UNSUPPORTED_Y:o((function(){var t=Xr("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),BROKEN_CARET:o((function(){var t=Xr("^r","gy");return t.lastIndex=2,null!=t.exec("str")}))},Zr=RegExp.prototype.exec,to=$("native-string-replace",String.prototype.replace),eo=Zr,no=function(){var t=/a/,e=/b*/g;return Zr.call(t,"a"),Zr.call(e,"a"),0!==t.lastIndex||0!==e.lastIndex}(),ro=Yr.UNSUPPORTED_Y||Yr.BROKEN_CARET,oo=void 0!==/()??/.exec("")[1];(no||oo||ro)&&(eo=function(t){var e,n,r,o,i=this,s=ro&&i.sticky,a=Wr.call(i),c=i.source,u=0,l=t;return s&&(-1===(a=a.replace("y","")).indexOf("g")&&(a+="g"),l=String(t).slice(i.lastIndex),i.lastIndex>0&&(!i.multiline||i.multiline&&"\n"!==t[i.lastIndex-1])&&(c="(?: "+c+")",l=" "+l,u++),n=new RegExp("^(?:"+c+")",a)),oo&&(n=new RegExp("^"+c+"$(?!\\s)",a)),no&&(e=i.lastIndex),r=Zr.call(s?n:i,l),s?r?(r.input=r.input.slice(u),r[0]=r[0].slice(u),r.index=i.lastIndex,i.lastIndex+=r[0].length):i.lastIndex=0:no&&r&&(i.lastIndex=i.global?r.index+r[0].length:e),oo&&r&&r.length>1&&to.call(r[0],n,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(r[o]=void 0)})),r});var io=eo;Tt({target:"RegExp",proto:!0,forced:/./.exec!==io},{exec:io});var so=Bt("species"),ao=!o((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),co="$0"==="a".replace(/./,"$0"),uo=Bt("replace"),lo=!!/./[uo]&&""===/./[uo]("a","$0"),fo=!o((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]})),ho=function(t){return function(e,n){var r,o,i=String(p(e)),s=ct(n),a=i.length;return s<0||s>=a?t?"":void 0:(r=i.charCodeAt(s))<55296||r>56319||s+1===a||(o=i.charCodeAt(s+1))<56320||o>57343?t?i.charAt(s):r:t?i.slice(s,s+2):o-56320+(r-55296<<10)+65536}},po={codeAt:ho(!1),charAt:ho(!0)}.charAt,vo=function(t,e,n){return e+(n?po(t,e).length:1)},go=Math.floor,mo="".replace,yo=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,_o=/\$([$&'`]|\d{1,2})/g,bo=function(t,e,n,r,o,i){var s=n+t.length,a=r.length,c=_o;return void 0!==o&&(o=Xn(o),c=yo),mo.call(i,c,(function(i,c){var u;switch(c.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,n);case"'":return e.slice(s);case"<":u=o[c.slice(1,-1)];break;default:var l=+c;if(0===l)return i;if(l>a){var f=go(l/10);return 0===f?i:f<=a?void 0===r[f-1]?c.charAt(1):r[f-1]+c.charAt(1):i}u=r[l-1]}return void 0===u?"":u}))},wo=function(t,e){var n=t.exec;if("function"==typeof n){var r=n.call(t,e);if("object"!=typeof r)throw TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==f(t))throw TypeError("RegExp#exec called on incompatible receiver");return io.call(t,e)},Co=Math.max,So=Math.min;!function(t,e,n,r){var i=Bt(t),s=!o((function(){var e={};return e[i]=function(){return 7},7!=""[t](e)})),a=s&&!o((function(){var e=!1,n=/a/;return"split"===t&&((n={}).constructor={},n.constructor[so]=function(){return n},n.flags="",n[i]=/./[i]),n.exec=function(){return e=!0,null},n[i](""),!e}));if(!s||!a||"replace"===t&&(!ao||!co||lo)||"split"===t&&!fo){var c=/./[i],u=n(i,""[t],(function(t,e,n,r,o){return e.exec===io?s&&!o?{done:!0,value:c.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}}),{REPLACE_KEEPS_$0:co,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:lo}),l=u[0],f=u[1];nt(String.prototype,t,l),nt(RegExp.prototype,i,2==e?function(t,e){return f.call(t,this,e)}:function(t){return f.call(t,this)})}r&&I(RegExp.prototype[i],"sham",!0)}("replace",2,(function(t,e,n,r){var o=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,i=r.REPLACE_KEEPS_$0,s=o?"$":"$0";return[function(n,r){var o=p(this),i=null==n?void 0:n[t];return void 0!==i?i.call(n,o,r):e.call(String(o),n,r)},function(t,r){if(!o&&i||"string"==typeof r&&-1===r.indexOf(s)){var a=n(e,t,this,r);if(a.done)return a.value}var c=O(t),u=String(this),l="function"==typeof r;l||(r=String(r));var f=c.global;if(f){var h=c.unicode;c.lastIndex=0}for(var d=[];;){var p=wo(c,u);if(null===p)break;if(d.push(p),!f)break;""===String(p[0])&&(c.lastIndex=vo(u,lt(c.lastIndex),h))}for(var v,g="",m=0,y=0;y<d.length;y++){p=d[y];for(var _=String(p[0]),b=Co(So(ct(p.index),u.length),0),w=[],C=1;C<p.length;C++)w.push(void 0===(v=p[C])?v:String(v));var S=p.groups;if(l){var A=[_].concat(w,b,u);void 0!==S&&A.push(S);var x=String(r.apply(void 0,A))}else x=bo(_,u,b,w,S,r);b>=m&&(g+=u.slice(m,b)+x,m=b+_.length)}return g+u.slice(m)}]}));var Ao=[],xo={maxSize:500,getLog:function(){return Array.prototype.slice.call(Ao,0)},clear:function(){Ao=[]}};var Oo={log:function(){try{(console.debug||console.log).apply(console,arguments)}catch(t){}},error:function(){try{console.error.apply(console,arguments)}catch(t){}},warn:function(){try{console.warn.apply(console,arguments)}catch(t){}}};function Eo(t){return Eo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Eo(t)}function ko(t){return t&&"object"===Eo(t)&&!Io(t)}function Io(t){return"[object Array]"===Object.prototype.toString.call(t)}function To(){for(var t={},e=0;e<arguments.length;++e){var n=arguments[e];for(var r in n)t[r]&&ko(t[r])&&ko(n[r])?t[r]=To(t[r],n[r]):t[r]=n[r]}return t}var jo=["p","email","split","utm","r","pgid","o_ss","o_v"],Ro=!1;function Po(){this._batchesByUrls={},this._timeoutId=null,this._config={maxBatchSize:6e4,maxChunkSize:4e3,timeout:1e3,idle:!1},"undefined"!=typeof window&&window.addEventListener("beforeunload",this.process.bind(this,!0))}function Uo(t){return"s".concat(t,"s").replace(/s+/g,"s").replace(/^s$/g,"")}function Lo(t){for(var e in t)void 0!==t[e]&&null!==t[e]||delete t[e];return t}function Mo(t,e){for(var n=-1,r=0;r<t.length;r++)if(e===t[r]){n=r;break}return n}Po.prototype.setConfig=function(t){if(!Ro)return t.timeout=Math.max(1e3,t.timeout||0),this._config=To(this._config,t),void(Ro=!0);var e=[];for(var n in t)n in this._config?e.push(n):this._config[n]=t[n];e.length&&Oo.warn("Queue config field(s) "+e.join(", ")+" are already set and can't be modified")},Po.prototype.getConfig=function(){return To(this._config,{})},Po.prototype.push=function(t,e){!function(t){for(Ao.push(t);Ao.length>xo.maxSize;)Ao.shift()}(e);var n=t+"/batch?"+Po._buildQueryString(e);e=Po._stringifyParams(e);var r=JSON.stringify(e);if(r.length+2>this._config.maxBatchSize)Oo.error("Radar #"+e.uid+" body is too long: "+r);else{this._batchesByUrls[n]||(this._batchesByUrls[n]=[[]]);var o,i=this._batchesByUrls[n];for(o=0;o<i.length;++o){var s=i[o];if(JSON.stringify(s.concat([e])).length<=this._config.maxBatchSize){s.push(e);break}}o===i.length&&i.push([e]),this._timeoutId||"function"!=typeof setTimeout||(this._timeoutId=setTimeout(this.process.bind(this),this._config.timeout))}},Po.prototype.process=function(t){for(var e in clearTimeout(this._timeoutId),this._timeoutId=null,this._batchesByUrls){for(var n=this._batchesByUrls[e],r=0;r<n.length;++r)this._send(e,n[r],t);delete this._batchesByUrls[e]}},Po.prototype.isIdle=function(){return this._config.idle},Po._buildQueryString=function(t){for(var e=[],n=0;n<jo.length;++n){var r=jo[n],o="string"==typeof t[r]?t[r]:JSON.stringify(t[r]);delete t[r],void 0!==o&&o.length&&e.push(encodeURIComponent(r)+"="+encodeURIComponent(o))}var i=[];for(var s in t.baseQuery)i.push(s);i=i.sort();for(var a=0;a<i.length;++a){var c=i[a];e.push(encodeURIComponent(c)+"="+encodeURIComponent(t.baseQuery[c]))}return delete t.baseQuery,e.join("&")},Po.prototype._send=function(t,e,n){var r={url:t,data:"batch="+encodeURIComponent(JSON.stringify(e)),type:"POST",async:!0};if(!this._config.idle)if(n&&window.navigator.sendBeacon)window.navigator.sendBeacon(r.url,r.data);else{var o=new XMLHttpRequest;"function"==typeof this._config.beforeSend&&!this._config.beforeSend(o,r)?o.abort():(o.open(r.type,r.url,r.async),o.withCredentials=!0,o.send(r.data))}},Po._stringifyParams=function(t){var e={};for(var n in t)"i"!==n?e[n]="string"==typeof t[n]?t[n]:JSON.stringify(t[n]):e.i=Po._stringifyI(t.i);return e},Po._stringifyI=function(t){var e=[];for(var n in t){var r=t[n];e.push(n+":"+r)}return e.join(",")};var Do=0,No=["radarPrefix","split","r","pgid","utm","o_ss","o_v"],Fo=!1,$o=new Po,Go="xray_rlog_dot_error",Ko="xray_rlog_msg_abs",Vo="xray_too_long",Bo="xray_not_configured",Ho="xray_send_dwh-with-skipdwh";function zo(){this._config={xrayRadarUrl:"https://xray.mail.ru",pgid:(Date.now()+Math.random()).toString(36),radarPrefix:"",r:"undefined"!=typeof document&&document.referrer||"",defaultParams:{p:"mail",t_feature:"",v:1,skipdwh:!1}}}zo.prototype.logger=xo,zo.prototype.setConfig=function(t,e){if((t=t||{}).split&&(t.split=Uo(t.split)),Fo)for(var n=0;n<No.length;++n)delete t[No[n]];Fo=!0,t.defaultParams&&t.defaultParams.i&&(t.defaultParams.i=this._formatIntervals(t.defaultParams.i),delete this._config.defaultParams.i),this._config=e?t:To(this._config,t),t.gaTrackingId&&this._initGA(t.gaTrackingId)},zo.prototype.addSplit=function(t){this._config.split=Uo("".concat(this._config.split||"","s").concat(t))},zo.prototype.getConfig=function(){return To(this._config,{})},zo.prototype.getTotalSended=function(){return Do},zo.prototype.setQueueConfig=Po.prototype.setConfig.bind($o),zo.prototype.getQueueConfig=Po.prototype.getConfig.bind($o),zo.prototype.getInstanceCopy=function(){var t=new zo;return Fo=!1,t.setConfig(this._config,!0),t},zo.prototype.send=function(t,e,n){this._send(t,e,n,!0)},zo.prototype._send=function(t,e,n,r){if(r&&!Fo&&t!==Bo){var o=e||{};o.t=t,this._logOwnError(o,Bo),Oo.warn("Your xray instance is not configured")}if(e=To(e||{},{}),this._config.middlewares)for(var i=0;i<this._config.middlewares.length;i++){var s=(0,this._config.middlewares[i])(t,e,n);t=s.t,e=s.params,n=s.ga}t=Io(t)?t.join("_"):t,e.i&&(e.i=this._formatIntervals(e.i)),e=To(this._config.defaultParams,e,{t:t,split:this._config.split,r:this._config.r,pgid:this._config.pgid,utm:this._config.utm,o_ss:this._config.o_ss,o_v:this._config.o_v,baseQuery:this._config.baseQuery,uid:Do++}),r&&e.skipdwh&&e.dwh&&this._logOwnError(e,Ho);for(var a=[e.t_feature,this._config.radarPrefix],c=0;c<a.length;++c)a[c]&&(e.t=a[c]+"_"+e.t);delete e.t_feature;try{e=this._validateParams(e,r)}catch(t){return Oo.log("xray",e.uid,e),void Oo.error(t.message)}if(this._config.verbose&&Oo.log("xray",e.uid,e.t,e,n?"GA: "+!!n:void 0),$o.push(this._config.xrayRadarUrl,e),!0!==n||this._config.gaTrackingId){var u="string"==typeof n?n:this._config.gaTrackingId;if(n&&u&&!$o.isIdle()){if(e.i){for(var l in e.i)this._sendGA(t+"_"+l,e.i[l],u);return}this._sendGA(t,e.v,u)}}else Oo.error("Radar #"+e.uid+": no GA tracking id specified")},zo.prototype.sendImmediately=function(t,e,n){this.send(t,e,n),$o.process()},zo.prototype.addMiddleware=function(t){this._config.middlewares||(this._config.middlewares=[]),-1===Mo(this._config.middlewares,t)&&this._config.middlewares.push(t)},zo.prototype.removeMiddleware=function(t){if(this._config.middlewares){var e=Mo(this._config.middlewares,t);e>-1&&this._config.middlewares.splice(e,1)}},zo.prototype._sendGA=function(t,e,n){"function"!=typeof gtag&&this._initGA(n);var r=t.split(/_/g),o=r[1]||r[0],i=r[1]?r[0]:"",s=r.slice(2).join("_"),a={value:e,send_to:n};i&&(a.event_category=i),s&&(a.event_label=s),gtag("event",o,a)},zo.prototype._initGA=function(t){if(!window.gtag){var e=document.createElement("script");e.src="https://www.googletagmanager.com/gtag/js?id="+t,e.type="text/javascript",document.getElementsByTagName("head")[0].appendChild(e),window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)},gtag("js",new Date)}gtag("config",t,{send_page_view:!1})},zo.prototype._logOwnError=function(t,e,n){var r="xray_err",o=r,i=t.p;if(i){if(i.length+r.length+1>32){var s=32-r.length-1;i=i.slice(0,s)}o="".concat(i,"_").concat(r)}var a=t.t;a.length>64&&(a=a.slice(0,64)),this._send(e,{skipdwh:!0,rlog:o,rlog_message:{t:a,err:e,value:n}},!1,!1)},zo.prototype._validateParams=function(t,e){(t=Lo(t)).rlog&&-1!==t.rlog.indexOf(".")&&(e&&this._logOwnError(t,Go,t.rlog),Oo.error("Radar #".concat(t.uid,": rlog can not contain file extension")),delete t.rlog,delete t.rlog_message),t.rlog&&t.rlog_message||(t.rlog_message&&(e&&this._logOwnError(t,Ko),Oo.error("Radar #".concat(t.uid,": rlog_message would not be sent without rlog"))),delete t.rlog,delete t.rlog_message);var n={32:[t.p,t.rlog],64:[t.p+"_"+t.t]};for(var r in t.i)n[32].push(r),n[64].push(t.p+"_"+t.t+"_"+r);for(var o in n)for(var i=n[o],s=0;s<i.length;++s)if(i[s]&&i[s].length>o)throw e&&this._logOwnError(t,Vo,i[s].slice(0,o)),new Error("Radar #".concat(t.uid,": value is too long: ").concat(n[o][s])+" (len: ".concat(i[s].length,", limit: ").concat(o,")"));return t},zo.prototype._formatIntervals=function(t){if(ko(t))return t;var e={};if(Io(t)){for(var n=0;n<t.length;++n){var r=t[n].split(":");e[r[0]]=+r[1]||this._config.defaultParams.v}return e}if("string"==typeof t){var o=t.split(",");return this._formatIntervals(o)}};var Qo,qo,Jo,Wo,Xo,Yo=new zo;function Zo(t,e){for(var n=t.split("&"),r=n[0],o={},i=1;i<n.length;++i){var s=n[i].split("="),a=decodeURIComponent(s[0]),c=decodeURIComponent(s[1]);try{c=JSON.parse(c)}catch(t){}o[a]=c}(e=e||{}).immediately?Yo.sendImmediately(r,o,e.ga):Yo.send(r,o,e.ga)}Zo.setConfig=function(t){Yo.setConfig(Lo({verbose:t.verbose,pgid:t.pgid,split:t.split,xrayRadarUrl:t.xrayRadarUrl||t.XRAY_RADAR_URL,radarPrefix:t.radarPrefix||t.RadarPrefix,utm:t.utm,o_ss:t.o_ss,o_v:t.o_v,baseQuery:t.baseQuery,gaTrackingId:t.gaTrackingId||t.GA_TRACKING_ID,defaultParams:t.defaultParams||Lo({p:t.project,email:t.ActiveEmail})})),Yo.setQueueConfig(Lo({maxBatchSize:t.MAX_BATCH_SIZE,maxChunkSize:t.MAX_CHUNK_SIZE,beforeSend:t.beforeSend,timeout:t.timeout,idle:t.idle}))},Zo.getConfig=zo.prototype.getConfig.bind(Yo),Zo.addSplit=zo.prototype.addSplit.bind(Yo),Zo.setQueueConfig=zo.prototype.setQueueConfig.bind(Yo),Zo.getQueueConfig=zo.prototype.getQueueConfig.bind(Yo),Zo.getTotalSended=zo.prototype.getTotalSended.bind(Yo),Zo.send=zo.prototype.send.bind(Yo),Zo.sendImmediately=zo.prototype.sendImmediately.bind(Yo),Zo.getInstanceCopy=zo.prototype.getInstanceCopy.bind(Yo),Zo.addMiddleware=zo.prototype.addMiddleware.bind(Yo),Zo.removeMiddleware=zo.prototype.removeMiddleware.bind(Yo),function(t){t[t.auto=42]="auto",t[t.cloud=182]="cloud",t[t.deti=129]="deti",t[t.dobro=190]="dobro",t[t.health=145]="health",t[t.hitech=123]="hitech",t[t.home=169]="home",t[t.go=76]="go",t[t.kino=30]="kino",t[t.lady=104]="lady",t[t.moymir=120]="moymir",t[t.moymirgameclub=501]="moymirgameclub",t[t.news=29]="news",t[t.octavius=105]="octavius",t[t.pets=466]="pets",t[t.realty=122]="realty",t[t.vkmail=509]="vkmail",t[t.weather=112]="weather",t[t.ok=163]="ok"}(Qo||(Qo={})),function(t){t.friends="friends",t.messages="messages",t.photos="photos",t.groups="groups",t.notifications="notifications"}(qo||(qo={})),function(t){t.markCnt="markCnt",t.messageCnt="messageCnt",t.notificationCnt="notificationCnt",t.messages="messages",t.friends="friends",t.presents="presents"}(Jo||(Jo={})),function(t){t.additional="additional",t.business="business",t.mailrugroup="mailrugroup",t.general="general"}(Wo||(Wo={})),function(t){t[t.promo=256]="promo",t[t.pointer=8]="pointer"}(Xo||(Xo={}));const ti=t=>{!jr&&Zo.send(t,{value:1})};class ei extends Ir{constructor(t){let{extendedSettings:e,isDebug:n,siteId:r,isModern:o,experimentId:i}=t;super(),this.xray=function(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Zo.setConfig({verbose:t,split:e||"",defaultParams:{p:"whiteline"+(r?"-lite":""),i:r?n:Qo[n]||"unknown"+(n?`_${n}`:""),skipdwh:!0}}),Zo}(n,i,r),ti("load_inline"),ti(o?"is-modern":"is-legacy"),ti(`load_inline_${Ur.BUILD}`),(null==e?void 0:e.hasExternal)&&Lr(e.bundleUrl,!0)}}var ni,ri,oi,ii,si;!function(t){t.AccountDataUpdate="accountDataUpdate",t.UpdateCounterMail="updateCounterMail",t.UpdateCounterLove="updateCounterLove",t.UpdateCounterGames="updateCounterGames",t.UpdateCounterOK="updateCounterOK",t.UpdateCounterVK="updateCounterVK",t.UpdateCounterMoyMir="updateCounterMoyMir"}(ni||(ni={})),function(t){t.VisibilityChange="visibilitychange",t.AuthChange="authChange",t.AuthLost="authLost",t.Update="update",t.LoginRequest="loginRequest",t.RegisterRequest="registerRequest",t.ColorThemeChange="colorThemeChange",t.LangChange="langChange"}(ri||(ri={})),function(t){t.Show="show",t.Hide="hide"}(oi||(oi={})),function(t){t.Show="show",t.Hide="hide",t.Load="load",t.Focus="focus"}(ii||(ii={})),function(t){t.Show="show",t.Hide="hide"}(si||(si={}));var ai=Bt("match"),ci=k.f,ui=yt.f,li=et.set,fi=Bt("match"),hi=r.RegExp,di=hi.prototype,pi=/a/g,vi=/a/g,gi=new hi(pi)!==pi,mi=Yr.UNSUPPORTED_Y;if(i&&kt("RegExp",!gi||mi||o((function(){return vi[fi]=!1,hi(pi)!=pi||hi(vi)==vi||"/a/i"!=hi(pi,"i")})))){for(var yi=function(t,e){var n,r,o,i=this instanceof yi,s=g(n=t)&&(void 0!==(r=n[ai])?!!r:"RegExp"==f(n)),a=void 0===e;if(!i&&s&&t.constructor===yi&&a)return t;gi?s&&!a&&(t=t.source):t instanceof yi&&(a&&(e=Wr.call(t)),t=t.source),mi&&(o=!!e&&e.indexOf("y")>-1)&&(e=e.replace(/y/g,""));var c,u,l,h,d,p=(c=gi?new hi(t,e):hi(t,e),u=i?this:di,l=yi,cr&&"function"==typeof(h=u.constructor)&&h!==l&&g(d=h.prototype)&&d!==l.prototype&&cr(c,d),c);return mi&&o&&li(p,{sticky:o}),p},_i=function(t){t in yi||ci(yi,t,{configurable:!0,get:function(){return hi[t]},set:function(e){hi[t]=e}})},bi=ui(hi),wi=0;bi.length>wi;)_i(bi[wi++]);di.constructor=yi,yi.prototype=di,nt(r,"RegExp",yi)}ee("RegExp");const Ci=864e5,Si="s",Ai="s_",xi=t=>!(t===Si||t.startsWith(Ai)||"ph"===t);function Oi(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];let[r,o,i]=e;if(void 0!==o){let t="",e=i||{};null===o?e=Object.assign(Object.assign({},e),{expires:-1}):t=o.toString();const n=xi(r)?encodeURIComponent(t):t,s=()=>{if(e.expires&&"number"==typeof e.expires){return`; expires=${new Date(Date.now()+e.expires*Ci).toUTCString()}`}return""},a=e.path?`; path=${e.path}`:"",c=e.domain?`; domain=${e.domain}`:"",u=e.samesite?`; SameSite=${e.samesite}`:"",l=e.secure?"; secure":"";return document.cookie=`${r}=${n}${s()}${a}${c}${u}${l}`,t}if(document.cookie){let t=(document.cookie.match(new RegExp(`(?:^|; ?)${r}\\=(\\S*?)(?:; ?|$)`))||[])[1];if(xi(r)&&t)try{t=decodeURIComponent(o)}catch(t){}return t}}var Ei=function(){if(function(t,e,n){if(!/Version\/.* Safari\//.test(t)||/Chrom(e|ium)/.test(t))return!1;var r=t.match(/\(Macintosh;.*Mac OS X (\d+)_(\d+)[_\d]*.*\) AppleWebKit\//);return r&&r[1]===String(e)&&r[2]===String(n)}(navigator.userAgent,10,14)||function(t,e){var n=t.match(/\(iP.+; CPU .*OS (\d+)[_\d]*.*\) AppleWebKit\//);return n&&n[1]===String(e)}(navigator.userAgent,12))return"";var t,e;return document.cookie="_s_test=1;path=/;SameSite=None;Secure",t="_s_test",((e=document.cookie.match(new RegExp("(?:^|; )"+t.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)")))?decodeURIComponent(e[1]):void 0)?(document.cookie="_s_test=1;path=/;max-age=-1;SameSite=None;Secure",";SameSite=None;Secure"):""};function ki(){return";SameSite=None;Secure"===Ei()}function Ii(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];let[r,o,i,s]=e;const a=new RegExp(`(^|\\|)(${i}=)(.*?)(\\||$)`),c=Object.assign({domain:o,expires:365,path:"/"},ki()&&{samesite:"None",secure:!0});let u,l;if(i){if(u=Oi(r)||"",l=(u.match(a)||[])[3],void 0!==s){let t=null,e="";if(void 0!==l||null===s){let n;n=null===s?(t,e,n,r,o,i,s)=>0===i?"":o:`$1$2${s}$4`,t=u.replace(a,n),e=t}else u&&(e=`${u}|`),e=`${e+i}=${s}`;Oi(r,""===t?null:e,c)}else s=l;return s}}const Ti={__domain:Pr,__prefix:null,_S_cookie_set_get_remove:Ii,_getPrefix(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e={prefix:t.prefix||Ti.__prefix,domain:t.domain||Ti.__domain};if(!e.prefix||!e.domain)throw new Error("run setProject before");return e},_throw_noValue_Error(){throw new Error("need value")},getGlobal:t=>Ii("s",Ti.__domain,t),setGlobal:(t,e)=>(void 0===e&&Ti._throw_noValue_Error(),Ii(Si,Ti.__domain,t,e),Ti.getGlobal(t)),removeGlobal(t){const e=Ti.getGlobal(t);return Ii(Si,Ti.__domain,t,null),e},setProject(t,e){if(!t||!e)throw new Error("project is not valid");e.startsWith(".")||(e=`.${e}`),Ti.__prefix=t,jr&&(e=e.replace(/.[a-z0-9\-]*.[a-z0-9]*$/,Rr)),Ti.__domain=e},getLocal(t,e){const n=Ti._getPrefix(e);return Ii(`s_${n.prefix}`,n.domain,t)},setLocal(t,e,n){const r=Ti._getPrefix(n);return void 0===e&&Ti._throw_noValue_Error(),Ii(`s_${r.prefix}`,r.domain,t,e),Ti.getLocal(t,r)},removeLocal(t,e){const n=Ti._getPrefix(e),r=Ti.getLocal(t,n);return Ii(`s_${n.prefix}`,n.domain,t,null),r}};function ji(){return window.devicePixelRatio}class Ri{constructor(){this._invocations=[],this._fn=null,this._context=null}getQuery(){const t=this._invoke.bind(this);return t.replaceImpl=this.replaceImpl.bind(this),t}_invoke(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._fn?this._fn.apply(this._context,e):this._invocations.push(e)}replaceImpl(t,e){if(this._fn)return;const n=e||window;this._invocations.forEach((e=>{t.apply(n,e)})),delete this._invocations,this._fn=t,this._context=n}}function Pi(t){const e=new URLSearchParams(t),n={};return e.forEach(((t,e)=>{n[e]=t})),n}let Ui=!1;class Li extends Ir{constructor(t){if(super(),this.show=(new Ri).getQuery(),this.hide=(new Ri).getQuery(),this.insert=(new Ri).getQuery(),t.authGate){const e={allow_external:t.enableExtDomains,vk:t.social.vk?1:null,ok:t.social.ok?1:null,fb:t.social.fb?1:null,mobile_redirect:!!t.authGateMobileRedirect,app_id_mytracker:t.appIdMytracker};t.authGateSuccessRedirectUrl&&(e.success_redirect=t.authGateSuccessRedirectUrl),t.siteId&&Qo[t.siteId]&&(e.project=Qo[t.siteId]),t.enableLoginByPhone&&(e.supports_ph_acc=1);Lr(t.authGateVersion||"https://img.imgsmail.ru/ag/2.8.0/authGate.js").addEventListener("load",(()=>window.__AG.then((t=>{t.setSettings(e),this.show.replaceImpl(function(t,e){return function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{from:"navi"};if(Mi(t))Di(t,e,n.focus);else{if(n){const{preview:t}=Pi(window.location.search);if(t&&(n.preview=t),!n.type)switch(n.formType){case"login":n.type="login";break;case"relogin":n.type="choice"}!n.success_redirect&&n.successPage&&(n.success_redirect=n.successPage)}t.show(n)}}}(t,this)),this.hide.replaceImpl(function(t){return()=>{Ui||t.hide()}}(t)),this.insert.replaceImpl(function(t){return(e,n)=>{t.insert&&(Ui=!0,t.insert(e,n))}}(t)),this.isVisible=()=>t.isVisible(),Ir.relay([ii.Show,ii.Hide,ii.Load],t,this)}))))}}isVisible(){return!1}}function Mi(t){return t.insert&&Ui}function Di(t,e,n){if(t.focus){const r=n&&"string"==typeof n?n:"login";t.focus(r,(()=>{e.emit(ii.Focus)}))}}class Ni extends Ir{constructor(){super(...arguments),this.show=(new Ri).getQuery(),this.hide=(new Ri).getQuery()}}class Fi extends Ir{constructor(){super(...arguments),this.show=(new Ri).getQuery(),this.hide=(new Ri).getQuery()}}var $i=function(t){return function(e,n,r,o){Rt(n);var i=Xn(e),s=d(i),a=lt(i.length),c=t?a-1:0,u=t?-1:1;if(r<2)for(;;){if(c in s){o=s[c],c+=u;break}if(c+=u,t?c<0:a<=c)throw TypeError("Reduce of empty array with no initial value")}for(;t?c>=0:a>c;c+=u)c in s&&(o=n(o,s[c],c,i));return o}},Gi={left:$i(!1),right:$i(!0)},Ki=Gi.left,Vi=Br("reduce");Tt({target:"Array",proto:!0,forced:!Vi||!Pt&&Nt>79&&Nt<83},{reduce:function(t){return Ki(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}});var Bi=function(){return Bi=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Bi.apply(this,arguments)},Hi=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],s=0,a=i.length;s<a;s++,o++)r[o]=i[s];return r},zi=function(t,e,n){if(void 0===n&&(n=!1),!t||!e||"object"!=typeof t||"object"!=typeof e)return t;var r=Bi({},t);for(var o in e)e.hasOwnProperty(o)&&(e[o]instanceof Array&&t[o]instanceof Array?r[o]=n?Hi(t[o],e[o]):e[o]:"object"==typeof e[o]&&"object"==typeof t[o]?r[o]=zi(t[o],e[o],n):r[o]=e[o]);return r},Qi=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],s=0,a=i.length;s<a;s++,o++)r[o]=i[s];return r},qi={defaults:{},errorType:null,polyfills:{fetch:null,FormData:null,URLSearchParams:null,performance:null,PerformanceObserver:null,AbortController:null},polyfill:function(t,e){for(var n=void 0===e?{}:e,r=n.doThrow,o=void 0===r||r,i=n.instance,s=void 0!==i&&i,a=[],c=2;c<arguments.length;c++)a[c-2]=arguments[c];var u=this.polyfills[t]||("undefined"!=typeof self?self[t]:null)||("undefined"!=typeof global?global[t]:null);if(o&&!u)throw new Error(t+" is not defined");return s&&u?new(u.bind.apply(u,Qi([void 0],a))):u}},Ji=function(t,e,n,r){if(!t.getEntriesByName)return!1;var o=t.getEntriesByName(e);return!!(o&&o.length>0)&&(n(o.reverse()[0]),r.clearMeasures&&r.clearMeasures(e),Wi.callbacks.delete(e),Wi.callbacks.size<1&&(Wi.observer.disconnect(),r.clearResourceTimings&&r.clearResourceTimings()),!0)},Wi={callbacks:new Map,observer:null,observe:function(t,e){if(t&&e){var n=qi.polyfill("performance",{doThrow:!1});(function(t,e){return!Wi.observer&&t&&e&&(Wi.observer=new e((function(e){Wi.callbacks.forEach((function(n,r){Ji(e,r,n,t)}))})),t.clearResourceTimings&&t.clearResourceTimings()),Wi.observer})(n,qi.polyfill("PerformanceObserver",{doThrow:!1}))&&(Ji(n,t,e,n)||(Wi.callbacks.size<1&&Wi.observer.observe({entryTypes:["resource","measure"]}),Wi.callbacks.set(t,e)))}}},Xi=Gi.right,Yi=Br("reduceRight");Tt({target:"Array",proto:!0,forced:!Yi||!Pt&&Nt>79&&Nt<83},{reduceRight:function(t){return Xi(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}});var Zi=function(t){this.error=t},ts=function(){return ts=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},ts.apply(this,arguments)},es=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],s=0,a=i.length;s<a;s++,o++)r[o]=i[s];return r},ns="application/json",rs="Content-Type",os=function(){function t(t,e,n,r,o,i){void 0===n&&(n=new Map),void 0===r&&(r=[]),void 0===o&&(o=[]),void 0===i&&(i=[]),this._url=t,this._options=e,this._catchers=n,this._resolvers=r,this._middlewares=o,this._deferredChain=i}return t.factory=function(e,n){return void 0===e&&(e=""),void 0===n&&(n={}),new t(e,n)},t.prototype.selfFactory=function(e){var n=void 0===e?{}:e,r=n.url,o=void 0===r?this._url:r,i=n.options,s=void 0===i?this._options:i,a=n.catchers,c=void 0===a?this._catchers:a,u=n.resolvers,l=void 0===u?this._resolvers:u,f=n.middlewares,h=void 0===f?this._middlewares:f,d=n.deferredChain,p=void 0===d?this._deferredChain:d;return new t(o,ts({},s),new Map(c),es(l),es(h),es(p))},t.prototype.defaults=function(t,e){return void 0===e&&(e=!1),qi.defaults=e?zi(qi.defaults,t):t,this},t.prototype.errorType=function(t){return qi.errorType=t,this},t.prototype.polyfills=function(t){return qi.polyfills=ts(ts({},qi.polyfills),t),this},t.prototype.url=function(t,e){if(void 0===e&&(e=!1),e)return this.selfFactory({url:t});var n=this._url.split("?");return this.selfFactory({url:n.length>1?n[0]+t+"?"+n[1]:this._url+t})},t.prototype.options=function(t,e){return void 0===e&&(e=!0),this.selfFactory({options:e?zi(this._options,t):t})},t.prototype.query=function(t,e){return void 0===e&&(e=!1),this.selfFactory({url:is(this._url,t,e)})},t.prototype.headers=function(t){return this.selfFactory({options:zi(this._options,{headers:t||{}})})},t.prototype.accept=function(t){return this.headers({Accept:t})},t.prototype.content=function(t){var e;return this.headers(((e={})["Content-Type"]=t,e))},t.prototype.auth=function(t){return this.headers({Authorization:t})},t.prototype.catcher=function(t,e){var n=new Map(this._catchers);return n.set(t,e),this.selfFactory({catchers:n})},t.prototype.signal=function(t){return this.selfFactory({options:ts(ts({},this._options),{signal:t.signal})})},t.prototype.resolve=function(t,e){return void 0===e&&(e=!1),this.selfFactory({resolvers:e?[t]:es(this._resolvers,[t])})},t.prototype.defer=function(t,e){return void 0===e&&(e=!1),this.selfFactory({deferredChain:e?[t]:es(this._deferredChain,[t])})},t.prototype.middlewares=function(t,e){return void 0===e&&(e=!1),this.selfFactory({middlewares:e?t:es(this._middlewares,t)})},t.prototype.method=function(t,e,n){void 0===e&&(e={}),void 0===n&&(n=null);var r=this._options.headers,o=n?"object"!=typeof n||r&&!Object.entries(r).every((function(t){var e=t[0],n=t[1];return e.toLowerCase()!==rs.toLowerCase()||n.startsWith(ns)}))?this.body(n):this.json(n):this;return function(t){var e=t._url,n=t._catchers,r=t._resolvers,o=t._middlewares,i=t._options,s=new Map(n),a=zi(qi.defaults,i),c=qi.polyfill("AbortController",{doThrow:!1,instance:!0});!a.signal&&c&&(a.signal=c.signal);var u={ref:null,clear:function(){u.ref&&(clearTimeout(u.ref),u.ref=null)}},l=function(t){return function(e){return 0===t.length?e:1===t.length?t[0](e):t.reduceRight((function(n,r,o){return o===t.length-2?r(n(e)):r(n)}))}}(o)(qi.polyfill("fetch"))(e,a),f=l.catch((function(t){throw new Zi(t)})).then((function(t){return u.clear(),t.ok?t:t[qi.errorType||"text"]().then((function(e){var n=new Error(e);throw n[qi.errorType||"text"]=e,n.status=t.status,n.response=t,n}))})),h=function(e){return e.catch((function(e){u.clear();var n=e instanceof Zi?e.error:e;if(e instanceof Zi&&s.has("__fromFetch"))return s.get("__fromFetch")(n,t);if(s.has(n.status))return s.get(n.status)(n,t);if(s.has(n.name))return s.get(n.name)(n,t);throw n}))},d=function(t){return function(e){return h(t?f.then((function(e){return e&&e[t]()})).then((function(t){return e?e(t):t})):f.then((function(t){return e?e(t):t})))}},p={res:d(null),json:d("json"),blob:d("blob"),formData:d("formData"),arrayBuffer:d("arrayBuffer"),text:d("text"),perfs:function(t){return l.then((function(e){return Wi.observe(e.url,t)})),p},setTimeout:function(t,e){return void 0===e&&(e=c),u.clear(),u.ref=setTimeout((function(){return e.abort()}),t),p},controller:function(){return[c,p]},error:function(t,e){return s.set(t,e),p},badRequest:function(t){return p.error(400,t)},unauthorized:function(t){return p.error(401,t)},forbidden:function(t){return p.error(403,t)},notFound:function(t){return p.error(404,t)},timeout:function(t){return p.error(408,t)},internalError:function(t){return p.error(500,t)},fetchError:function(t){return p.error("__fromFetch",t)},onAbort:function(t){return p.error("AbortError",t)}};return r.reduce((function(e,n){return n(e,t)}),p)}((o=o.options(ts(ts({},e),{method:t})))._deferredChain.reduce((function(t,e){return e(t,t._url,t._options)}),o))},t.prototype.get=function(t){return this.method("GET",t)},t.prototype.delete=function(t){return this.method("DELETE",t)},t.prototype.put=function(t,e){return this.method("PUT",e,t)},t.prototype.post=function(t,e){return this.method("POST",e,t)},t.prototype.patch=function(t,e){return this.method("PATCH",e,t)},t.prototype.head=function(t){return this.method("HEAD",t)},t.prototype.opts=function(t){return this.method("OPTIONS",t)},t.prototype.replay=function(t){return this.method(this._options.method,t)},t.prototype.body=function(t){return this.selfFactory({options:ts(ts({},this._options),{body:t})})},t.prototype.json=function(t){var e,n=null===(e=Object.entries(this._options.headers||{}).find((function(t){var e=t[0],n=t[1];return e.toLowerCase()===rs.toLowerCase()&&n.startsWith(ns)})))||void 0===e?void 0:e[1];return this.content(n||ns).body(JSON.stringify(t))},t.prototype.formData=function(t,e){return void 0===e&&(e=!1),this.body(ss(t,e))},t.prototype.formUrl=function(t){return this.body("string"==typeof t?t:(e=t,Object.keys(e).map((function(t){var n=e[t];return n instanceof Array?n.map((function(e){return as(t,e)})).join("&"):as(t,n)})).join("&"))).content("application/x-www-form-urlencoded");var e},t}(),is=function(t,e,n){var r;if("string"==typeof e)r=e;else{var o=qi.polyfill("URLSearchParams",{instance:!0});for(var i in e)if(e[i]instanceof Array)for(var s=0,a=e[i];s<a.length;s++){var c=a[s];o.append(i,c)}else o.append(i,e[i]);r=o.toString()}var u=t.split("?");return n||u.length<2?u[0]+"?"+r:t+"&"+r};function ss(t,e,n,r){return void 0===e&&(e=!1),void 0===n&&(n=qi.polyfill("FormData",{instance:!0})),void 0===r&&(r=[]),Object.entries(t).forEach((function(t){var o=t[0],i=t[1],s=r.reduce((function(t,e){return t?t+"["+e+"]":e}),null);if(s=s?s+"["+o+"]":o,i instanceof Array)for(var a=0,c=i;a<c.length;a++){var u=c[a];n.append(s+"[]",u)}else!e||"object"!=typeof i||e instanceof Array&&e.includes(o)?n.append(s,i):null!==i&&ss(i,e,n,es(r,[o]))})),n}function as(t,e){return encodeURIComponent(t)+"="+encodeURIComponent("object"==typeof e?JSON.stringify(e):""+e)}var cs=os.factory;cs.default=os.factory;class us{constructor(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.url=t,this.isCors=e}get options(){return this.isCors?{credentials:"include",mode:"cors"}:{mode:"no-cors"}}get(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return cs().options(this.options).url(this.url+e).query(t).query({_:Math.round((new Date).getTime()+1e9*Math.random())}).get().fetchError(((t,e)=>{const n=`${t.message} in request to ${e._url}`;throw new Error(n)}))}getJson(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return this.get(t,e).json()}post(t){return cs(this.url).options(Object.assign(Object.assign({},this.options),{method:"post"})).formUrl(t).post()}}const ls=jr?"//portal.devmail.ru":"//portal.mail.ru",fs=jr?"//auth.devmail.ru":"//auth.mail.ru",hs=`//ok.ru/mapi?query=${encodeURIComponent('{"cmd":"getCounters"}')}`;var ds;!function(t){t.OK="ok",t.NOAUTH="noauth",t.ERROR="error"}(ds||(ds={}));const ps={mac:1,Socials:1};var vs,gs=new class extends us{constructor(){super(ls)}getInfo(t,e){let n=Object.assign(Object.assign(Object.assign({},ps),{gamescnt:1}),e);return jr&&(n=Object.assign(Object.assign({},n),{ldata:1})),t&&(n=Object.assign(Object.assign({},n),{Login:t})),this.getJson(n,"/NaviData")}getListInfo(t,e){let n=Object.assign(Object.assign(Object.assign({},ps),{ldata:1}),e);return t&&(n=Object.assign(Object.assign({},n),{Login:t})),this.getJson(n,"/NaviData")}getDomains(t){return this.getJson(t,"/Domains")}};!function(t){t.OK="ok",t.NOAUTH="noauth",t.MRIM="mrim"}(vs||(vs={}));class ms extends us{auth(t){const e={mac:1,Login:t};return this.getJson(e,"/cgi-bin/auth")}logout(t){const e={Login:t,mac:1};return this.getJson(e,"/cgi-bin/logout")}}class ys{static convert(t){let{status:e,data:n}=t;var r,o,i;const s=(null===(r=n)||void 0===r?void 0:r.ldata)||{};return{status:e,accounts:(null===(i=null===(o=n)||void 0===o?void 0:o.list)||void 0===i?void 0:i.map((t=>({email:t,active:n.email===t,firstName:s[t].first_name||"",lastName:s[t].last_name||"",socialId:ys.getSocialId(t),verified:!!s[t].verified,counters:{mail:s[t].mail_cnt}}))))||[]}}static getSocialId(t){const e=t.match(/^[0-9]+@(vk|ok|fb)$/);return e&&e[1]}}const _s="s_c";function bs(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];for(let e=0;e<t.length;e+=1){const n=t[e].split("@")[1];if(["corp.mail.ru","vk.team"].includes(n))return Ti.setGlobal(_s,Date.now()),!0}const e=Ti.getGlobal(_s);if(e&&Date.now()>1*+e+Ci)return Ti.removeGlobal(_s),!1}var ws=new class extends us{constructor(){super(hs)}};class Cs{constructor(t,e,n){let{eventType:r,counterKeys:o}=t;this.eventType=r,this.counterKeys=o,this.updateAccountCounter=e,this.eventEmitter=n}get value(){return this._value}updateValue(t){this._value=t}updateData(t){this.eventEmitter.emit(this.eventType,null,this.parseSocialData(t));const e=this.summarizeCounters(this.parseSocialData(t),this.counterKeys);this.value!==e&&this.updateValue(e)}summarizeCounters(t,e){return Object.entries(t).reduce(((t,n)=>{let[r,o]=n;return t+(e[r]?o:0)}),0)}parseSocialData(t){return Object.entries(t).reduce(((t,e)=>{let[n,r]=e;return t[n]=["number","string"].includes(typeof r)?r:r.count,t}),{})}getDataFromApi(){}}class Ss extends Cs{constructor(t,e){super({eventType:ni.UpdateCounterOK,counterKeys:Jo},t,e)}getDataFromApi(){ws.getJson().then((t=>{"no auth"===t.status?this.updateAccountCounter({ok:{}}):this.updateAccountCounter({ok:t.data||{}}),ti("ok_counter_success"),ti("social_counters_ok_success_api")})).catch((()=>{ti("ok_counter_error"),ti("social_counters_ok_error_api")}))}}var As=new class extends us{constructor(){super("//vk.com/feed2.php")}};class xs extends Cs{constructor(t,e){super({eventType:ni.UpdateCounterVK,counterKeys:qo},t,e)}getDataFromApi(){As.getJson({act:"widget",utm_source:"mrg_ph"}).then((t=>{var e;-1!==(null===(e=t.user)||void 0===e?void 0:e.id)?this.updateAccountCounter({vk:t||{}}):this.updateAccountCounter({vk:{}}),ti("vk_counter_success"),ti("social_counters_vk_success_api")})).catch((()=>{ti("vk_counter_error"),ti("social_counters_vk_error_api")}))}}let Os=!1;const Es=(t,e)=>t&&e?`${t} ${e}`:t||e;class ks{constructor(t){let{ph:e,eventEmitter:n,activeUser:r,authUrl:o=fs,socialCountersSettings:i,stayInAccountList:s}=t;this.gamesCount=0,this.mailCount=0,this.moymirCount=0,this.loveCount=0,this.restAccountsMailCount=0,this.accounts=[],this.ph=e,this.eventEmitter=n,this.activeUser=r||void 0,this.parentActiveUser=r||void 0,this.authApi=new ms(function(t){const e="mail.ru"===window.location.host,n=/\.mail\.ru$/.test(window.location.host);return e||n?fs:t}(o)),this.socialCountersSettings=i,this.okCounter=new Ss(this.updateSomeCounters.bind(this),n),this.vkCounter=new xs(this.updateSomeCounters.bind(this),n),this.stayInAccountList=s,this.loadAccountsList(null,this.getSocialsParams()),this.socialCountersSettings.isShowOkCounter&&ti("social_counters_hit_ok"),this.socialCountersSettings.isShowVKCounter&&ti("social_counters_hit_vk")}getSocialsParams(){const t={};return this.socialCountersSettings.isShowVKCounter&&this.socialCountersSettings.isVKConnectForVKCounter&&(t.vk_connect=1),this.socialCountersSettings.isShowOkCounter&&this.socialCountersSettings.isServerApiForOKCounter&&(t.ok_counters=1),t}handleSocialCounters(t,e){let{vk_counters:n=null,ok_counters:r=null}=t;var o,i;n&&Object.values(n).length?(ti("vk_counter_success"),ti("social_counters_vk_server")):e&&(null===(o=this.socialCountersSettings)||void 0===o?void 0:o.isShowVKCounter)&&(this.vkCounter.getDataFromApi(),n&&ti("social_counters_vk_repeat")),r&&Object.values(r).length?(ti("ok_counter_success"),ti("social_counters_ok_server")):e&&(null===(i=this.socialCountersSettings)||void 0===i?void 0:i.isShowOkCounter)&&(this.socialCountersSettings.isServerApiForOKCounter?this.socialCountersSettings.isClientApiAfterServerApiForOKCounter?this.okCounter.getDataFromApi():this.updateSomeCounters({ok:{}}):this.okCounter.getDataFromApi())}handleSocialCountersErrors(){var t,e;(null===(t=this.socialCountersSettings)||void 0===t?void 0:t.isShowVKCounter)&&(ti("vk_counter_error"),ti("social_counters_vk_error_server")),(null===(e=this.socialCountersSettings)||void 0===e?void 0:e.isShowOkCounter)&&(ti("ok_counter_error"),ti("social_counters_ok_error_server"))}loadAccountInfo(t,e){return gs.getInfo(t,e).then((t=>{var n;ti("load_account_info_success"),t.status===ds.OK?(this.handleUpdateAccount(t.data),this.handleSocialCounters(t.data,e),bs(null===(n=t.data)||void 0===n?void 0:n.list)):t.status===ds.NOAUTH&&this.handleClearAccount()})).catch((()=>{ti("load_account_info_error"),this.handleSocialCountersErrors()}))}loadAccountsList(t,e){let n={};return gs.getListInfo(this.activeUser,e).then((t=>{var r;ti("load_accounts_list_success"),t.status===ds.OK?(this.handleUpdateAccount(t.data),this.handleSocialCounters(t.data,e),bs(null===(r=t.data)||void 0===r?void 0:r.list),Os||(Os=!0)):t.status===ds.NOAUTH&&this.handleClearAccount(),n=t})).catch((()=>{ti("load_accounts_list_error"),this.handleSocialCountersErrors(),n={status:ds.ERROR,data:{}}})).finally((()=>{t&&t(ys.convert(n))}))}logoutAccount(t,e){return this.authApi.logout(t).then((t=>{ti("logout_account_success"),t.status===ds.OK&&this.loadAccountsList(e)})).catch((()=>{ti("logout_account_error")}))}switchAccountWithReload(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0;return t?this.authApi.auth(t).then((r=>{let{status:o,data:i,location:s}=r;switch(ti("switch_account_success"),o){case vs.OK:this.activeUserFullName=Es(i.first_name,i.last_name),e?this.loadAccountsList(null,n):this.loadAccountInfo(i.email,n);break;case vs.MRIM:return(null===window||void 0===window?void 0:window.location)&&s&&(window.location.href=s),!1;case vs.NOAUTH:if(i.list.includes(t))return this.handleExpiredAccount(t),!1;i.email&&i.list.length?this.stayInAccountList?this.loadAccountInfo(i.email,n):this.loadAccountsList(null,n):i.list.length||this.handleClearAccount()}return!0})).catch((()=>(ti("switch_account_error"),!0))):Promise.resolve(!0)}updateSomeCounters(t){"mail"in t&&this.updateCounterMail(+t.mail),"love"in t&&this.updateCounterLove(+t.love),"games"in t&&this.updateCounterGames(+t.games),"moymir"in t&&this.updateCounterMoyMir(+t.moymir),"ok"in t&&this.okCounter.updateData(t.ok),"vk"in t&&this.vkCounter.updateData(t.vk),this.emitAccountDataUpdate()}emitAccountDataUpdate(){this.eventEmitter.emit(ni.AccountDataUpdate,null,{activeUser:this.activeUser,activeUserFullName:this.activeUserFullName,parentActiveUser:this.parentActiveUser,gamesCount:this.gamesCount,mailCount:this.mailCount,moymirCount:this.moymirCount,okCount:this.okCounter.value,vkCount:this.vkCounter.value,loveCount:this.loveCount,restAccountsMailCount:this.restAccountsMailCount,accounts:this.accounts})}updateCounterMail(t){"number"==typeof t&&this.mailCount!==t&&(this.eventEmitter.emit(ni.UpdateCounterMail,null,{count:t}),this.mailCount=t)}updateCounterLove(t){"number"==typeof t&&this.loveCount!==t&&(this.eventEmitter.emit(ni.UpdateCounterLove,null,{count:t}),this.loveCount=t)}updateCounterGames(t){"number"==typeof t&&this.gamesCount!==t&&(this.eventEmitter.emit(ni.UpdateCounterGames,null,{count:t}),this.gamesCount=t)}updateCounterMoyMir(t){"number"==typeof t&&this.moymirCount!==t&&(this.eventEmitter.emit(ni.UpdateCounterMoyMir,null,{count:t}),this.moymirCount=t)}handleUpdateAccount(t){const e=()=>{this.updateAccount(t)},n=Is(t);if(this.ph.getListenersNumber(ri.AuthChange)&&Os&&this.activeUser!==n)return(new Image).src=`//r3.mail.ru/k?auth=1&rnd=${Math.random()}`,void this.ph.emit(ri.AuthChange,e,{email:n});e()}updateAccount(t){if(this.parentActiveUser=t.email,this.activeUser=Is(t),this.restAccountsMailCount=t.mail_notifier?+t.mail_notifier:0,t.ldata){const e=function(t){const e=[];return t.list.forEach((n=>{const r=t.ldata[n].children;let o;r&&(o={},Object.entries(r).forEach((t=>{let[n,r]=t;e.push({user:n,firstName:r.first_name,lastName:r.last_name,mailCounter:r.mail_cnt,verified:!1,child:!0}),o[n]={firstName:r.first_name,lastName:r.last_name,mailCounter:r.mail_cnt,isActive:r.active}})));const i=t.ldata[n];e.push({user:n,firstName:i.first_name,lastName:i.last_name,mailCounter:i.mail_cnt,verified:i.verified,child:i.child,children:o})})),[...e.reduce(((t,e)=>(t.set(e.user,e),t)),new Map).values()]}(t);this.accounts=e;const n=e.find((t=>t.user===this.activeUser)),r=n.firstName?n.firstName:"",o=n.lastName?n.lastName:"";this.activeUserFullName=Es(r,o)}this.updateCounterMail(+t.mail_cnt),this.updateCounterMoyMir(+t.my_cnt),this.updateCounterGames(+t.games_cnt),t.ok_counters&&Object.values(t.ok_counters).length&&this.okCounter.updateData(t.ok_counters),t.vk_counters&&Object.values(t.vk_counters).length&&this.vkCounter.updateData(t.vk_counters),this.emitAccountDataUpdate()}handleClearAccount(){this.ph.getListenersNumber(ri.AuthLost)&&this.activeUser?this.ph.emit(ri.AuthLost,this.clearAccount,{}):this.clearAccount()}handleExpiredAccount(t){this.ph.authForm.show({type:"choice",email:t,from:"navi"})}clearAccount(){this.activeUser="",this.activeUserFullName="",this.parentActiveUser="",this.updateCounterMail(0),this.updateCounterLove(0),this.updateCounterGames(0),this.updateCounterMoyMir(0),this.okCounter.updateData({}),this.vkCounter.updateData({}),this.restAccountsMailCount=0,this.accounts=[],this.emitAccountDataUpdate()}}function Is(t){return t.active_email||t.email}class Ts{constructor(t,e,n){this._ph=t,this._socialCountersSettings=e,this._isHideRightPart=n,document.addEventListener("visibilitychange",this.onVisibilityChange.bind(this))}onVisibilityChange(){const t="hidden"!==document.visibilityState,e=this._socialCountersSettings.updateSocialCountersOnVisibilityChange?this._ph.getSocialsParams():null;if(this._ph.emit(ri.VisibilityChange,null,{visible:t}),t){const t=this._ph.activeUser();t&&!this._isHideRightPart?(this._ph.switchAccount(t,!1,!1,e),e&&this._socialCountersSettings.isShowOkCounter&&ti("social_counters_visibility_change_ok"),e&&this._socialCountersSettings.isShowVKCounter&&ti("social_counters_visibility_change_vk")):this._ph.loadAccountInfo()}}}let js,Rs;window.__PH=new class extends ei{constructor(t){Rs=t,Rs||(console.warn("ERROR (PublicPH): no initial settings data"),Rs={siteId:"",siteZone:"",experimentId:"",isWhiteline:!0,isDebug:"",activeEmail:"",maxAccounts:"20",counters:{},experiments:{},colorTheme:sn.Default,social:{vk:!1,ok:!1,fb:!1},lang:Mn}),super({extendedSettings:t._,isDebug:!!Rs.isDebug,siteId:Rs.siteId,isModern:Rs.isModern,experimentId:Rs.experimentId}),this.authForm=new Li(Rs),this.authMenu=new Ni,this.marusiaMenu=new Fi,this.cookie=Object.assign(Oi,{s:Ti,fieldCookie:Ii}),ji()>1?(Ti.setGlobal("rt",1),Ti.setGlobal("dpr",ji())):(Ti.removeGlobal("rt"),Ti.removeGlobal("dpr"));const e=new Tr;js=new ks({ph:this,eventEmitter:e,activeUser:Rs.activeEmail,authUrl:Rs.authUrl,socialCountersSettings:{isShowVKCounter:Rs.isShowVKCounter,isVKConnectForVKCounter:Rs.isVKConnectForVKCounter,isShowOkCounter:Rs.isShowOkCounter,isServerApiForOKCounter:Rs.isServerApiForOKCounter,isClientApiAfterServerApiForOKCounter:Rs.isClientApiAfterServerApiForOKCounter,socialCountersTimer:Rs.socialCountersTimer,updateSocialCountersOnVisibilityChange:Rs.updateSocialCountersOnVisibilityChange},stayInAccountList:Rs.stayInAccountListOnVisibilityChange}),this.accountService={onAccountDataUpdate:t=>e.on(ni.AccountDataUpdate,t),on:(t,n)=>e.on(t,n),removeListener:(t,n)=>e.removeListener(t,n)},new Ts(this,js.socialCountersSettings,Rs.isHideRightPart)}getSocialsParams(){return js.getSocialsParams()}loadAccountInfo(t,e){return js.loadAccountInfo(t,e)}loadAccountsList(t,e){return js.loadAccountsList(t,e)}switchAccount(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3?arguments[3]:void 0;return js.switchAccountWithReload(t,e,r).then((t=>{t&&n&&!this.getListenersNumber(ri.AuthChange)&&window.location.reload()}))}logoutAccount(t,e){return js.logoutAccount(t,e)}activeUser(){return js.activeUser}isMultiAuth(){return!!Rs.authGate}isAuthFormEnabled(){return!!Rs.authGate}isMarusiaMenuEnabled(){const t=this.activeUser(),e=Rs.lang===Mn;return!(!(Rs.isOnMarusia&&e&&t)||/(@vk|@ok|@fb)$/.test(t))}updateCounter(t){js.updateSomeCounters(t)}setColorTheme(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sn.Default;this.emit(ri.ColorThemeChange,null,{colorTheme:Object.values(sn).includes(t)?t:sn.Default})}}(window.__PHS),Object.freeze(window.__PH)}();
